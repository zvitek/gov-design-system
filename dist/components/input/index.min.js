/*! Gov v0.1.0 | MIT License | github.com/gov/gov */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Input={})}(this,function(t){"use strict";var e={mixins:[{props:{validationMessage:{type:[String,Array],required:!1,default:null}},mounted:function(){var t=this;this.$nextTick(function(){return t.prepareValidity()})},watch:{validationMessage:function(){this.prepareValidity()}},computed:{parentField:function(){for(var t=this.$parent,e=0;e<3;e++)t&&!t.$data._isField&&(t=t.$parent);return t},childField:function(){var t=this.$children.filter(function(t){return t.$data._isField});return t.length?t[0]:null}},methods:{prepareValidity:function(){var t=this.validationMessage;Array.isArray(t)&&t.length||"string"==typeof t?this.setValidity(t):this.setValidity(null)},setValidity:function(t){var e=this;this.$nextTick(function(){var n=e.childField||e.parentField;n&&(n.errorMessage=t)})}}}],props:{autocomplete:{type:String,required:!1,default:void 0},maxlength:{type:[Number,String],required:!1,default:void 0},customUniqueId:{type:[String,Number],required:!1,default:null}},data:function(){return{uniqueId:null,isFocused:!1}},mounted:function(){this.uniqueId=this.customUniqueId||"input_"+function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*i));return e}()},watch:{uniqueId:function(){this.swtUniqueId()}},computed:{parentField:function(){for(var t=this.$parent,e=0;e<3;e++)t&&!t.$data._isField&&(t=t.$parent);return t}},methods:{focus:function(){var t=this.getElement();void 0!==t&&this.$nextTick(function(){t&&t.focus()})},onBlur:function(t){this.isFocused=!1,this.$emit("blur",t)},onFocus:function(t){this.isFocused=!0,this.$emit("focus",t)},getElement:function(){for(var t,e=this.$refs[this.$data._elementRef];(t=e)&&t._isVue;)e=e.$refs[e.$data._elementRef];return e},setNotEmpty:function(t){var e=this;this.$nextTick(function(){e.parentField&&(e.parentField.notEmpty=t)})},swtUniqueId:function(){var t=this;this.$nextTick(function(){t.parentField&&(t.parentField.uniqueId=t.uniqueId)})}}},n={mixins:[e],inheritAttrs:!1,props:{value:[Number,String],type:{type:String,default:"text"},lazy:{type:Boolean,default:!1},whisperer:{type:Boolean,default:!1},customClass:{type:String,default:""}},data:function(){return{newValue:this.value,enforceEmptyValue:!1,_elementRef:"input"}},computed:{computedValue:{get:function(){return this.newValue},set:function(t){this.newValue=t,this.$emit("input",t)}},valueLength:function(){return"string"==typeof this.computedValue?this.computedValue.length:"number"==typeof this.computedValue?this.computedValue.toString().length:0}},watch:{value:function(t){this.newValue=t,this.calculateNotEmpty()}},methods:{onInput:function(t){if(!this.lazy){var e=t.target.value;this.updateValue(e)}},onChange:function(t){if(this.lazy){var e=t.target.value;this.updateValue(e)}},newOnBlur:function(t){this.onBlur(t),this.calculateNotEmpty()},newOnFocus:function(t){this.onFocus(t),this.calculateNotEmpty()},updateValue:function(t){this.computedValue=t},calculateNotEmpty:function(){this.setNotEmpty(this.isFocused||this.valueLength||this.enforceEmptyValue)}},mounted:function(){this.calculateNotEmpty()}},i="on";var o=function(t,e,n,i,o,u,a,s,r,l){"boolean"!=typeof a&&(r=s,s=a,a=!1);var c,d="function"==typeof n?n.options:n;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),i&&(d._scopeId=i),u?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,r(t)),t&&t._registeredComponents&&t._registeredComponents.add(u)},d._ssrRegister=c):e&&(c=a?function(){e.call(this,l(this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),c)if(d.functional){var p=d.render;d.render=function(t,e){return c.call(e),p(t,e)}}else{var f=d.beforeCreate;d.beforeCreate=f?[].concat(f,c):[c]}return n};const u=o({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._b({ref:"input",staticClass:"gov-form-control__input",class:[t.customClass],attrs:{type:t.type,autocomplete:t.newAutocomplete,maxlength:t.maxlength,id:t.uniqueId},domProps:{value:t.computedValue},on:{input:t.onInput,change:t.onChange,blur:t.newOnBlur,focus:t.newOnFocus}},"input",t.$attrs,!1))},staticRenderFns:[]},void 0,{name:"GovInput",mixins:[n,e],computed:{newAutocomplete:function(){return this.autocomplete||i}},watch:{type:function(){this.resolveNativeTypes()}},methods:{resolveNativeTypes:function(){-1!==["date","time"].indexOf(this.type)&&(this.enforceEmptyValue=!0,this.calculateNotEmpty())}},mounted:function(){var t=this;this.$nextTick(function(){t.whisperer&&t.$refs.input.addEventListener("blur",function(){t.isFocused=!1,t.calculateNotEmpty()})}),this.resolveNativeTypes()}},void 0,!1,void 0,!1,void 0,void 0,void 0);const a=o({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("textarea",t._b({ref:"input",staticClass:"gov-form-control__input",class:[t.customClass],attrs:{maxlength:t.maxlength,id:t.uniqueId},domProps:{value:t.computedValue},on:{input:t.onInput,change:t.onChange,blur:t.newOnBlur,focus:t.newOnFocus}},"textarea",t.$attrs,!1))},staticRenderFns:[]},void 0,{name:"GovTextarea",mixins:[n,e]},void 0,!1,void 0,!1,void 0,void 0,void 0);var s,r=function(t,e){t.component(e.name,e)},l={install:function(t){r(t,u),r(t,a)}};s=l,"undefined"!=typeof window&&window.Vue&&window.Vue.use(s),t.GovInput=u,t.GovTexarea=a,t.default=l,Object.defineProperty(t,"__esModule",{value:!0})});
