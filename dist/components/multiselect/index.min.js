/*! Gov v0.1.0 | MIT License | github.com/gov/gov */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Multiselect={})}(this,function(e){"use strict";function t(e,t){return t.split(".").reduce(function(e,t){return e?e[t]:null},e)}var n=function(e){return!("string"!=typeof e&&"number"!=typeof e)},i=function(e){return Array.isArray(e)?e:n(e)?[e]:[]};const r=function(e,t,n,i,r,u,o,s,a,l){"boolean"!=typeof o&&(a=s,s=o,o=!1);var d,c="function"==typeof n?n.options:n;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,r&&(c.functional=!0)),i&&(c._scopeId=i),u?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(u)},c._ssrRegister=d):t&&(d=o?function(){t.call(this,l(this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(c.functional){var f=c.render;c.render=function(e,t){return d.call(t),f(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,d):[d]}return n}({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gov-field",{attrs:{label:e.label}},[n("gov-autocomplete",{attrs:{disabled:e.disabled,data:e.filteredDataArray,"clear-on-select":e.clearOnSelect,"open-on-focus":e.openOnFocus,"keep-open":e.keepOpen,field:e.searchField},on:{select:function(t){return e.selected=t}},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v("No results found")]},proxy:!0}]),model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e.selectedState.length?n("ul",{staticClass:"gov-multiselect__tags"},e._l(e.selectedState,function(t,i){return n("li",{key:i,staticClass:"gov-multiselect__tag"},[n("span",[e._v(e._s(e.getValue(t)))]),n("button",{staticClass:"gov-button--icon-only",attrs:{type:"button","aria-label":"Odebrat"},on:{click:function(t){return t.preventDefault(),e.remove(i)}}})])}),0):e._e()],1)},staticRenderFns:[]},void 0,{name:"GovMultiselect",mixins:[{mixins:[{props:{validationMessage:{type:[String,Array],required:!1,default:null}},mounted:function(){var e=this;this.$nextTick(function(){return e.prepareValidity()})},watch:{validationMessage:function(){this.prepareValidity()}},computed:{parentField:function(){for(var e=this.$parent,t=0;t<3;t++)e&&!e.$data._isField&&(e=e.$parent);return e},childField:function(){var e=this.$children.filter(function(e){return e.$data._isField});return e.length?e[0]:null}},methods:{prepareValidity:function(){var e=this.validationMessage;Array.isArray(e)&&e.length||"string"==typeof e?this.setValidity(e):this.setValidity(null)},setValidity:function(e){var t=this;this.$nextTick(function(){var n=t.childField||t.parentField;n&&(n.errorMessage=e)})}}}],props:{autocomplete:{type:String,required:!1,default:void 0},maxlength:{type:[Number,String],required:!1,default:void 0},customUniqueId:{type:[String,Number],required:!1,default:null}},data:function(){return{uniqueId:null,isFocused:!1}},mounted:function(){this.uniqueId=this.customUniqueId||"input_"+function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*i));return t}()},watch:{uniqueId:function(){this.swtUniqueId()}},computed:{parentField:function(){for(var e=this.$parent,t=0;t<3;t++)e&&!e.$data._isField&&(e=e.$parent);return e}},methods:{focus:function(){var e=this.getElement();void 0!==e&&this.$nextTick(function(){e&&e.focus()})},onBlur:function(e){this.isFocused=!1,this.$emit("blur",e)},onFocus:function(e){this.isFocused=!0,this.$emit("focus",e)},getElement:function(){for(var e,t=this.$refs[this.$data._elementRef];(e=t)&&e._isVue;)t=t.$refs[t.$data._elementRef];return t},setNotEmpty:function(e){var t=this;this.$nextTick(function(){t.parentField&&(t.parentField.notEmpty=e)})},swtUniqueId:function(){var e=this;this.$nextTick(function(){e.parentField&&(e.parentField.uniqueId=e.uniqueId)})}}}],props:{value:[Array,Number,String],data:{type:Array,required:!0},label:{type:String,required:!1,default:null},searchField:{type:String,required:!1,default:null},uniqueField:{type:String,required:!1,default:null},clearOnSelect:{type:Boolean,required:!1,default:!0},openOnFocus:{type:Boolean,required:!1,default:!1},multiselect:{type:Boolean,required:!1,default:!0},keepOpen:{type:Boolean,required:!1,default:!1},customUniqueId:{type:[String,Number],required:!1,default:null},disabled:{type:Boolean,required:!1,default:!1}},data:function(){return{name:"",selectedState:i(this.value),selected:null}},computed:{filteredDataArray:function(){var e=this;return this.data.filter(function(i){var r=i;return n(i)||(r=t(i,e.searchField)),r.toString().toLowerCase().indexOf(e.name.toLowerCase())>=0})}},watch:{value:function(e){this.selectedState=i(e)},selected:function(e){if(e){var i=e;!1===n(e)&&(i=t(e,this.uniqueField)),!1===this.isSelected(i)&&(this.multiselect?this.selectedState.push(e):this.selectedState=[e])}},selectedState:function(){this.multiselect?this.$emit("input",this.selectedState):this.$emit("input",this.selectedState.length?this.selectedState[0]:null)}},methods:{isSelected:function(e){var i=this;return!!this.selectedState.filter(function(r){return n(r)?r===e:t(r,i.uniqueField)===e}).length},getValue:function(e){return n(e)?e:t(e,this.searchField)},remove:function(e){this.selectedState.hasOwnProperty(e)&&this.selectedState.splice(e,1),this.name=""}}},void 0,!1,void 0,!1,void 0,void 0,void 0);var u,o={install:function(e){!function(e,t){e.component(t.name,t)}(e,r)}};u=o,"undefined"!=typeof window&&window.Vue&&window.Vue.use(u),e.GovMultiselect=r,e.default=o,Object.defineProperty(e,"__esModule",{value:!0})});
